{"id":"wYoO","dependencies":[{"name":"C:\\Users\\azimov\\Desktop\\Veza_web\\package.json","includedInParent":true,"mtime":1656657843887},{"name":"C:\\Users\\azimov\\Desktop\\Veza_web\\.browserslistrc","includedInParent":true,"mtime":1649067752858},{"name":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\mpd-parser\\package.json","includedInParent":true,"mtime":1656657842268},{"name":"@videojs/vhs-utils/es/resolve-url","loc":{"line":2,"column":23,"index":83},"parent":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\mpd-parser\\dist\\mpd-parser.es.js","resolved":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\@videojs\\vhs-utils\\es\\resolve-url.js"},{"name":"global/window","loc":{"line":3,"column":19,"index":139},"parent":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\mpd-parser\\dist\\mpd-parser.es.js","resolved":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\global\\window.js"},{"name":"@videojs/vhs-utils/es/media-groups","loc":{"line":4,"column":34,"index":190},"parent":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\mpd-parser\\dist\\mpd-parser.es.js","resolved":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\@videojs\\vhs-utils\\es\\media-groups.js"},{"name":"@videojs/vhs-utils/es/decode-b64-to-uint8-array","loc":{"line":5,"column":34,"index":262},"parent":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\mpd-parser\\dist\\mpd-parser.es.js","resolved":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\@videojs\\vhs-utils\\es\\decode-b64-to-uint8-array.js"},{"name":"@xmldom/xmldom","loc":{"line":6,"column":26,"index":339},"parent":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\mpd-parser\\dist\\mpd-parser.es.js","resolved":"C:\\Users\\azimov\\Desktop\\Veza_web\\node_modules\\@xmldom\\xmldom\\lib\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.toPlaylists=exports.toM3u8=exports.stringToMpdXml=exports.parseUTCTiming=exports.parse=exports.inheritAttributes=exports.generateSidxKey=exports.addSidxSegmentsToPlaylist=exports.VERSION=void 0;var t=a(require(\"@videojs/vhs-utils/es/resolve-url\")),e=a(require(\"global/window\")),n=require(\"@videojs/vhs-utils/es/media-groups\"),i=a(require(\"@videojs/vhs-utils/es/decode-b64-to-uint8-array\")),r=require(\"@xmldom/xmldom\");function a(t){return t&&t.__esModule?t:{default:t}}var u=\"0.21.1\",o=function(t){return!!t&&\"object\"==typeof t},s=function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.reduce(function(e,n){return\"object\"!=typeof n?e:(Object.keys(n).forEach(function(i){Array.isArray(e[i])&&Array.isArray(n[i])?e[i]=e[i].concat(n[i]):o(e[i])&&o(n[i])?e[i]=t(e[i],n[i]):e[i]=n[i]}),e)},{})},c=function(t){return Object.keys(t).map(function(e){return t[e]})},d=function(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n},l=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},m=function(t){if(!t.length)return[];for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e},f=function(t,e){return t.reduce(function(t,n,i){return n[e]&&t.push(i),t},[])},p=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},g=function(t,e){return c(t.reduce(function(t,n){return n.forEach(function(n){t[e(n)]=n}),t},{}))},v={INVALID_NUMBER_OF_PERIOD:\"INVALID_NUMBER_OF_PERIOD\",DASH_EMPTY_MANIFEST:\"DASH_EMPTY_MANIFEST\",DASH_INVALID_XML:\"DASH_INVALID_XML\",NO_BASE_URL:\"NO_BASE_URL\",MISSING_SEGMENT_INFORMATION:\"MISSING_SEGMENT_INFORMATION\",SEGMENT_TIME_UNSPECIFIED:\"SEGMENT_TIME_UNSPECIFIED\",UNSUPPORTED_UTC_TIMING_SCHEME:\"UNSUPPORTED_UTC_TIMING_SCHEME\"},b=function(n){var i=n.baseUrl,r=void 0===i?\"\":i,a=n.source,u=void 0===a?\"\":a,o=n.range,s=void 0===o?\"\":o,c=n.indexRange,d=void 0===c?\"\":c,l={uri:u,resolvedUri:(0,t.default)(r||\"\",u)};if(s||d){var m,f=(s||d).split(\"-\"),p=e.default.BigInt?e.default.BigInt(f[0]):parseInt(f[0],10),g=e.default.BigInt?e.default.BigInt(f[1]):parseInt(f[1],10);p<Number.MAX_SAFE_INTEGER&&\"bigint\"==typeof p&&(p=Number(p)),g<Number.MAX_SAFE_INTEGER&&\"bigint\"==typeof g&&(g=Number(g)),\"bigint\"==typeof(m=\"bigint\"==typeof g||\"bigint\"==typeof p?e.default.BigInt(g)-e.default.BigInt(p)+e.default.BigInt(1):g-p+1)&&m<Number.MAX_SAFE_INTEGER&&(m=Number(m)),l.byterange={length:m,offset:p}}return l},h=function(t){var n;return n=\"bigint\"==typeof t.offset||\"bigint\"==typeof t.length?e.default.BigInt(t.offset)+e.default.BigInt(t.length)-e.default.BigInt(1):t.offset+t.length-1,t.offset+\"-\"+n},S=function(t){return t&&\"number\"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},y={static:function(t){var e=t.duration,n=t.timescale,i=void 0===n?1:n,r=t.sourceDuration,a=t.periodDuration,u=S(t.endNumber),o=e/i;return\"number\"==typeof u?{start:0,end:u}:\"number\"==typeof a?{start:0,end:a/o}:{start:0,end:r/o}},dynamic:function(t){var e=t.NOW,n=t.clientOffset,i=t.availabilityStartTime,r=t.timescale,a=void 0===r?1:r,u=t.duration,o=t.periodStart,s=void 0===o?0:o,c=t.minimumUpdatePeriod,d=void 0===c?0:c,l=t.timeShiftBufferDepth,m=void 0===l?1/0:l,f=S(t.endNumber),p=(e+n)/1e3,g=i+s,v=p+d-g,b=Math.ceil(v*a/u),h=Math.floor((p-g-m)*a/u),y=Math.floor((p-g)*a/u);return{start:Math.max(0,h),end:\"number\"==typeof f?f:Math.min(b,y)}}},I=function(t){return function(e){var n=t.duration,i=t.timescale,r=void 0===i?1:i,a=t.periodStart,u=t.startNumber;return{number:(void 0===u?1:u)+e,duration:n/r,timeline:a,time:e*n}}},E=function(t){var e=t.type,n=t.duration,i=t.timescale,r=void 0===i?1:i,a=t.periodDuration,u=t.sourceDuration,o=y[e](t),s=o.start,c=o.end,l=d(s,c).map(I(t));if(\"static\"===e){var m=l.length-1,f=\"number\"==typeof a?a:u;l[m].duration=f-n/r*m}return l},T=function(t){var e=t.baseUrl,n=t.initialization,i=void 0===n?{}:n,r=t.sourceDuration,a=t.indexRange,u=void 0===a?\"\":a,o=t.periodStart,s=t.presentationTime,c=t.number,d=void 0===c?0:c,l=t.duration;if(!e)throw new Error(v.NO_BASE_URL);var m=b({baseUrl:e,source:i.sourceURL,range:i.range}),f=b({baseUrl:e,source:e,indexRange:u});if(f.map=m,l){var p=E(t);p.length&&(f.duration=p[0].duration,f.timeline=p[0].timeline)}else r&&(f.duration=r,f.timeline=o);return f.presentationTime=s||o,f.number=d,[f]},D=function(t,n,i){var r,a=t.sidx.map?t.sidx.map:null,u=t.sidx.duration,o=t.timeline||0,s=t.sidx.byterange,c=s.offset+s.length,d=n.timescale,l=n.references.filter(function(t){return 1!==t.referenceType}),m=[],f=t.endList?\"static\":\"dynamic\",p=t.sidx.timeline,g=p,v=t.mediaSequence||0;r=\"bigint\"==typeof n.firstOffset?e.default.BigInt(c)+n.firstOffset:c+n.firstOffset;for(var b=0;b<l.length;b++){var h=n.references[b],S=h.referencedSize,y=h.subsegmentDuration,I=void 0;I=\"bigint\"==typeof r?r+e.default.BigInt(S)-e.default.BigInt(1):r+S-1;var E=T({baseUrl:i,timescale:d,timeline:o,periodStart:p,presentationTime:g,number:v,duration:y,sourceDuration:u,indexRange:r+\"-\"+I,type:f})[0];a&&(E.map=a),m.push(E),r+=\"bigint\"==typeof r?e.default.BigInt(S):S,g+=y/d,v++}return t.segments=m,t};exports.addSidxSegmentsToPlaylist=D;var U=[\"AUDIO\",\"SUBTITLES\"],N=1/60,M=function(t){return g(t,function(t){return t.timeline}).sort(function(t,e){return t.timeline>e.timeline?1:-1})},O=function(t,e){for(var n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null},P=function(t){var e=[];return(0,n.forEachMediaGroup)(t,U,function(t,n,i,r){e=e.concat(t.playlists||[])}),e},A=function(t){var e=t.playlist,n=t.mediaSequence;e.mediaSequence=n,e.segments.forEach(function(t,n){t.number=e.mediaSequence+n})},R=function(t){var e=t.oldPlaylists,n=t.newPlaylists,i=t.timelineStarts;n.forEach(function(t){t.discontinuitySequence=p(i,function(e){return e.timeline===t.timeline});var n=O(e,t.attributes.NAME);if(n&&!t.sidx){var r=t.segments[0],a=p(n.segments,function(t){return Math.abs(t.presentationTime-r.presentationTime)<N});if(-1===a)return A({playlist:t,mediaSequence:n.mediaSequence+n.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!n.segments.length&&t.timeline>n.timeline||n.segments.length&&t.timeline>n.segments[n.segments.length-1].timeline)&&t.discontinuitySequence--);n.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),A({playlist:t,mediaSequence:n.segments[a].number})}})},x=function(t){var e=t.oldManifest,n=t.newManifest,i=e.playlists.concat(P(e)),r=n.playlists.concat(P(n));return n.timelineStarts=M([e.timelineStarts,n.timelineStarts]),R({oldPlaylists:i,newPlaylists:r,timelineStarts:n.timelineStarts}),n},_=function(t){return t&&t.uri+\"-\"+h(t.byterange)};exports.generateSidxKey=_;var w=function(t){return c(t.reduce(function(t,e){var n=e.attributes.id+(e.attributes.lang||\"\");if(t[n]){var i;if(e.segments)e.segments[0]&&(e.segments[0].discontinuity=!0),(i=t[n].segments).push.apply(i,e.segments);e.attributes.contentProtection&&(t[n].attributes.contentProtection=e.attributes.contentProtection)}else t[n]=e,t[n].attributes.timelineStarts=[];return t[n].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),t},{})).map(function(t){return t.discontinuityStarts=f(t.segments||[],\"discontinuity\"),t})},L=function(t,e){var n=_(t.sidx),i=n&&e[n]&&e[n].sidx;return i&&D(t,i,t.sidx.resolvedUri),t},B=function(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var n in t)t[n]=L(t[n],e);return t},C=function(t,e){var n,i=t.attributes,r=t.segments,a=t.sidx,u=t.mediaSequence,o=t.discontinuitySequence,s=t.discontinuityStarts,c={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n[\"PROGRAM-ID\"]=1,n),uri:\"\",endList:\"static\"===i.type,timeline:i.periodStart,resolvedUri:\"\",targetDuration:i.duration,discontinuitySequence:o,discontinuityStarts:s,timelineStarts:i.timelineStarts,mediaSequence:u,segments:r};return i.contentProtection&&(c.contentProtection=i.contentProtection),a&&(c.sidx=a),e&&(c.attributes.AUDIO=\"audio\",c.attributes.SUBTITLES=\"subs\"),c},q=function(t){var e,n=t.attributes,i=t.segments,r=t.mediaSequence,a=t.discontinuityStarts,u=t.discontinuitySequence;void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||\"\",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var o=((e={NAME:n.id,BANDWIDTH:n.bandwidth})[\"PROGRAM-ID\"]=1,e);return n.codecs&&(o.CODECS=n.codecs),{attributes:o,uri:\"\",endList:\"static\"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||\"\",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:u,mediaSequence:r,segments:i}},F=function(t,e,n){var i;void 0===e&&(e={}),void 0===n&&(n=!1);var r=t.reduce(function(t,r){var a=r.attributes.role&&r.attributes.role.value||\"\",u=r.attributes.lang||\"\",o=r.attributes.label||\"main\";if(u&&!r.attributes.label){var s=a?\" (\"+a+\")\":\"\";o=\"\"+r.attributes.lang+s}t[o]||(t[o]={language:u,autoselect:!0,default:\"main\"===a,playlists:[],uri:\"\"});var c=L(C(r,n),e);return t[o].playlists.push(c),void 0===i&&\"main\"===a&&((i=r).default=!0),t},{});i||(r[Object.keys(r)[0]].default=!0);return r},G=function(t,e){return void 0===e&&(e={}),t.reduce(function(t,n){var i=n.attributes.lang||\"text\";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:\"\"}),t[i].playlists.push(L(q(n),e)),t},{})},j=function(t){return t.reduce(function(t,e){return e?(e.forEach(function(e){var n=e.channel,i=e.language;t[i]={autoselect:!1,default:!1,instreamId:n,language:i},e.hasOwnProperty(\"aspectRatio\")&&(t[i].aspectRatio=e.aspectRatio),e.hasOwnProperty(\"easyReader\")&&(t[i].easyReader=e.easyReader),e.hasOwnProperty(\"3D\")&&(t[i][\"3D\"]=e[\"3D\"])}),t):t},{})},H=function(t){var e,n=t.attributes,i=t.segments,r=t.sidx,a=t.discontinuityStarts,u={attributes:(e={NAME:n.id,AUDIO:\"audio\",SUBTITLES:\"subs\",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},e[\"PROGRAM-ID\"]=1,e),uri:\"\",endList:\"static\"===n.type,timeline:n.periodStart,resolvedUri:\"\",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:i};return n.contentProtection&&(u.contentProtection=n.contentProtection),r&&(u.sidx=r),u},z=function(t){var e=t.attributes;return\"video/mp4\"===e.mimeType||\"video/webm\"===e.mimeType||\"video\"===e.contentType},k=function(t){var e=t.attributes;return\"audio/mp4\"===e.mimeType||\"audio/webm\"===e.mimeType||\"audio\"===e.contentType},V=function(t){var e=t.attributes;return\"text/vtt\"===e.mimeType||\"text\"===e.contentType},$=function(t,e){t.forEach(function(t){t.mediaSequence=0,t.discontinuitySequence=p(e,function(e){return e.timeline===t.timeline}),t.segments&&t.segments.forEach(function(t,e){t.number=e})})},X=function(t){return t?Object.keys(t).reduce(function(e,n){var i=t[n];return e.concat(i.playlists)},[]):[]},W=function(t){var e,n=t.dashPlaylists,i=t.locations,r=t.sidxMapping,a=void 0===r?{}:r,u=t.previousManifest;if(!n.length)return{};var o=n[0].attributes,s=o.sourceDuration,c=o.type,d=o.suggestedPresentationDelay,l=o.minimumUpdatePeriod,m=w(n.filter(z)).map(H),f=w(n.filter(k)),p=w(n.filter(V)),g=n.map(function(t){return t.attributes.captionServices}).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e[\"CLOSED-CAPTIONS\"]={},e.SUBTITLES={},e),uri:\"\",duration:s,playlists:B(m,a)};l>=0&&(v.minimumUpdatePeriod=1e3*l),i&&(v.locations=i),\"dynamic\"===c&&(v.suggestedPresentationDelay=d);var b=0===v.playlists.length,h=f.length?F(f,a,b):null,S=p.length?G(p,a):null,y=m.concat(X(h),X(S)),I=y.map(function(t){return t.timelineStarts});return v.timelineStarts=M(I),$(y,v.timelineStarts),h&&(v.mediaGroups.AUDIO.audio=h),S&&(v.mediaGroups.SUBTITLES.subs=S),g.length&&(v.mediaGroups[\"CLOSED-CAPTIONS\"].cc=j(g)),u?x({oldManifest:u,newManifest:v}):v};exports.toM3u8=W;var Y=function(t,e,n){var i=t.NOW,r=t.clientOffset,a=t.availabilityStartTime,u=t.timescale,o=void 0===u?1:u,s=t.periodStart,c=void 0===s?0:s,d=t.minimumUpdatePeriod,l=(i+r)/1e3+(void 0===d?0:d)-(a+c);return Math.ceil((l*o-e)/n)},K=function(t,e){for(var n=t.type,i=t.minimumUpdatePeriod,r=void 0===i?0:i,a=t.media,u=void 0===a?\"\":a,o=t.sourceDuration,s=t.timescale,c=void 0===s?1:s,d=t.startNumber,l=void 0===d?1:d,m=t.periodStart,f=[],p=-1,g=0;g<e.length;g++){var v=e[g],b=v.d,h=v.r||0,S=v.t||0;p<0&&(p=S),S&&S>p&&(p=S);var y=void 0;if(h<0){var I=g+1;y=I===e.length?\"dynamic\"===n&&r>0&&u.indexOf(\"$Number$\")>0?Y(t,p,b):(o*c-p)/b:(e[I].t-p)/b}else y=h+1;for(var E=l+f.length+y,T=l+f.length;T<E;)f.push({number:T,duration:b/c,time:p,timeline:m}),p+=b,T++}return f},Z=/\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g,J=function(t){return function(e,n,i,r){if(\"$$\"===e)return\"$\";if(void 0===t[n])return e;var a=\"\"+t[n];return\"RepresentationID\"===n?a:(r=i?parseInt(r,10):1,a.length>=r?a:\"\"+new Array(r-a.length+1).join(\"0\")+a)}},Q=function(t,e){return t.replace(Z,J(e))},tt=function(t,e){return t.duration||e?t.duration?E(t):K(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]},et=function(e,n){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,a=void 0===r?{sourceURL:\"\",range:\"\"}:r,u=b({baseUrl:e.baseUrl,source:Q(a.sourceURL,i),range:a.range});return tt(e,n).map(function(n){i.Number=n.number,i.Time=n.time;var r=Q(e.media||\"\",i),a=e.timescale||1,o=e.presentationTimeOffset||0,s=e.periodStart+(n.time-o)/a;return{uri:r,timeline:n.timeline,duration:n.duration,resolvedUri:(0,t.default)(e.baseUrl||\"\",r),map:u,number:n.number,presentationTime:s}})},nt=function(t,e){var n=t.baseUrl,i=t.initialization,r=void 0===i?{}:i,a=b({baseUrl:n,source:r.sourceURL,range:r.range}),u=b({baseUrl:n,source:e.media,range:e.mediaRange});return u.map=a,u},it=function(t,e){var n=t.duration,i=t.segmentUrls,r=void 0===i?[]:i,a=t.periodStart;if(!n&&!e||n&&e)throw new Error(v.SEGMENT_TIME_UNSPECIFIED);var u,o=r.map(function(e){return nt(t,e)});return n&&(u=E(t)),e&&(u=K(t,e)),u.map(function(e,n){if(o[n]){var i=o[n],r=t.timescale||1,u=t.presentationTimeOffset||0;return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i.presentationTime=a+(e.time-u)/r,i}}).filter(function(t){return t})},rt=function(t){var e,n,i=t.attributes,r=t.segmentInfo;r.template?(n=et,e=s(i,r.template)):r.base?(n=T,e=s(i,r.base)):r.list&&(n=it,e=s(i,r.list));var a={attributes:i};if(!n)return a;var u=n(e,r.segmentTimeline);if(e.duration){var o=e,c=o.duration,d=o.timescale,l=void 0===d?1:d;e.duration=c/l}else u.length?e.duration=u.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):e.duration=0;return a.attributes=e,a.segments=u,r.base&&e.indexRange&&(a.sidx=u[0],a.segments=[]),a},at=function(t){return t.map(rt)};exports.toPlaylists=at;var ut=function(t,e){return m(t.childNodes).filter(function(t){return t.tagName===e})},ot=function(t){return t.textContent.trim()},st=function(t){var e=/P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/.exec(t);if(!e)return 0;var n=e.slice(1),i=n[0],r=n[1],a=n[2],u=n[3],o=n[4],s=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(u||0)+60*parseFloat(o||0)+parseFloat(s||0)},ct=function(t){return/^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/.test(t)&&(t+=\"Z\"),Date.parse(t)},dt={mediaPresentationDuration:function(t){return st(t)},availabilityStartTime:function(t){return ct(t)/1e3},minimumUpdatePeriod:function(t){return st(t)},suggestedPresentationDelay:function(t){return st(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return st(t)},start:function(t){return st(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?st(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},lt=function(t){return t&&t.attributes?m(t.attributes).reduce(function(t,e){var n=dt[e.name]||dt.DEFAULT;return t[e.name]=n(e.value),t},{}):{}},mt={\"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b\":\"org.w3.clearkey\",\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\":\"com.widevine.alpha\",\"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95\":\"com.microsoft.playready\",\"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb\":\"com.adobe.primetime\"},ft=function(e,n){return n.length?l(e.map(function(e){return n.map(function(n){return(0,t.default)(e,ot(n))})})):e},pt=function(t){var e=ut(t,\"SegmentTemplate\")[0],n=ut(t,\"SegmentList\")[0],i=n&&ut(n,\"SegmentURL\").map(function(t){return s({tag:\"SegmentURL\"},lt(t))}),r=ut(t,\"SegmentBase\")[0],a=n||e,u=a&&ut(a,\"SegmentTimeline\")[0],o=n||r||e,c=o&&ut(o,\"Initialization\")[0],d=e&&lt(e);d&&c?d.initialization=c&&lt(c):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var l={template:d,segmentTimeline:u&&ut(u,\"S\").map(function(t){return lt(t)}),list:n&&s(lt(n),{segmentUrls:i,initialization:lt(c)}),base:r&&s(lt(r),{initialization:lt(c)})};return Object.keys(l).forEach(function(t){l[t]||delete l[t]}),l},gt=function(t,e,n){return function(i){var r=ut(i,\"BaseURL\"),a=ft(e,r),u=s(t,lt(i)),o=pt(i);return a.map(function(t){return{segmentInfo:s(n,o),attributes:s(u,{baseUrl:t})}})}},vt=function(t){return t.reduce(function(t,e){var n=lt(e);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var r=mt[n.schemeIdUri];if(r){t[r]={attributes:n};var a=ut(e,\"cenc:pssh\")[0];if(a){var u=ot(a);t[r].pssh=u&&(0,i.default)(u)}}return t},{})},bt=function(t){return\"urn:scte:dash:cc:cea-608:2015\"===t.schemeIdUri?(\"string\"!=typeof t.value?[]:t.value.split(\";\")).map(function(t){var e,n;if(n=t,/^CC\\d=/.test(t)){var i=t.split(\"=\");e=i[0],n=i[1]}else/^CC\\d$/.test(t)&&(e=t);return{channel:e,language:n}}):\"urn:scte:dash:cc:cea-708:2015\"===t.schemeIdUri?(\"string\"!=typeof t.value?[]:t.value.split(\";\")).map(function(t){var e={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,\"3D\":0};if(/=/.test(t)){var n=t.split(\"=\"),i=n[0],r=n[1],a=void 0===r?\"\":r;e.channel=i,e.language=t,a.split(\",\").forEach(function(t){var n=t.split(\":\"),i=n[0],r=n[1];\"lang\"===i?e.language=r:\"er\"===i?e.easyReader=Number(r):\"war\"===i?e.aspectRatio=Number(r):\"3D\"===i&&(e[\"3D\"]=Number(r))})}else e.language=t;return e.channel&&(e.channel=\"SERVICE\"+e.channel),e}):void 0},ht=function(t,e,n){return function(i){var r=lt(i),a=ft(e,ut(i,\"BaseURL\")),u=ut(i,\"Role\")[0],o={role:lt(u)},c=s(t,r,o),d=ut(i,\"Accessibility\")[0],m=bt(lt(d));m&&(c=s(c,{captionServices:m}));var f=ut(i,\"Label\")[0];if(f&&f.childNodes.length){var p=f.childNodes[0].nodeValue.trim();c=s(c,{label:p})}var g=vt(ut(i,\"ContentProtection\"));Object.keys(g).length&&(c=s(c,{contentProtection:g}));var v=pt(i),b=ut(i,\"Representation\"),h=s(n,v);return l(b.map(gt(c,a,h)))}},St=function(t,e){return function(n,i){var r=ft(e,ut(n.node,\"BaseURL\")),a=s(t,{periodStart:n.attributes.start});\"number\"==typeof n.attributes.duration&&(a.periodDuration=n.attributes.duration);var u=ut(n.node,\"AdaptationSet\"),o=pt(n.node);return l(u.map(ht(a,r,o)))}},yt=function(t){var e=t.attributes,n=t.priorPeriodAttributes,i=t.mpdType;return\"number\"==typeof e.start?e.start:n&&\"number\"==typeof n.start&&\"number\"==typeof n.duration?n.start+n.duration:n||\"static\"!==i?null:0},It=function(t,e){void 0===e&&(e={});var n=e,i=n.manifestUri,r=void 0===i?\"\":i,a=n.NOW,u=void 0===a?Date.now():a,o=n.clientOffset,s=void 0===o?0:o,c=ut(t,\"Period\");if(!c.length)throw new Error(v.INVALID_NUMBER_OF_PERIOD);var d=ut(t,\"Location\"),m=lt(t),f=ft([r],ut(t,\"BaseURL\"));m.type=m.type||\"static\",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=u,m.clientOffset=s,d.length&&(m.locations=d.map(ot));var p=[];return c.forEach(function(t,e){var n=lt(t),i=p[e-1];n.start=yt({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:m.type}),p.push({node:t,attributes:n})}),{locations:m.locations,representationInfo:l(p.map(St(m,f)))}};exports.inheritAttributes=It;var Et=function(t){if(\"\"===t)throw new Error(v.DASH_EMPTY_MANIFEST);var e,n,i=new r.DOMParser;try{n=(e=i.parseFromString(t,\"application/xml\"))&&\"MPD\"===e.documentElement.tagName?e.documentElement:null}catch(a){}if(!n||n&&n.getElementsByTagName(\"parsererror\").length>0)throw new Error(v.DASH_INVALID_XML);return n};exports.stringToMpdXml=Et;var Tt=function(t){var e=ut(t,\"UTCTiming\")[0];if(!e)return null;var n=lt(e);switch(n.schemeIdUri){case\"urn:mpeg:dash:utc:http-head:2014\":case\"urn:mpeg:dash:utc:http-head:2012\":n.method=\"HEAD\";break;case\"urn:mpeg:dash:utc:http-xsdate:2014\":case\"urn:mpeg:dash:utc:http-iso:2014\":case\"urn:mpeg:dash:utc:http-xsdate:2012\":case\"urn:mpeg:dash:utc:http-iso:2012\":n.method=\"GET\";break;case\"urn:mpeg:dash:utc:direct:2014\":case\"urn:mpeg:dash:utc:direct:2012\":n.method=\"DIRECT\",n.value=Date.parse(n.value);break;case\"urn:mpeg:dash:utc:http-ntp:2014\":case\"urn:mpeg:dash:utc:ntp:2014\":case\"urn:mpeg:dash:utc:sntp:2014\":default:throw new Error(v.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},Dt=u;exports.VERSION=Dt;var Ut=function(t,e){void 0===e&&(e={});var n=It(Et(t),e),i=at(n.representationInfo);return W({dashPlaylists:i,locations:n.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest})};exports.parse=Ut;var Nt=function(t){return Tt(Et(t))};exports.parseUTCTiming=Nt;"},"sourceMaps":null,"error":null,"hash":"c3a899a4088da9fdb6300fc3c51f978c","cacheData":{"env":{}}}